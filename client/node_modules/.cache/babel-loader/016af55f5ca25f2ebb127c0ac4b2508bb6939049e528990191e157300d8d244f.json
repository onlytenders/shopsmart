{"ast":null,"code":"var _jsxFileName = \"/Users/rahatmustafin/Documents/Projects/ShopSmart/client/src/components/ShoppingList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5001\";\nconst socket = io(API_URL, {\n  autoConnect: false\n});\nfunction ShoppingList() {\n  _s();\n  const {\n    listId\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [listName, setListName] = useState(\"Новый список\");\n  const [items, setItems] = useState([]);\n  const [members, setMembers] = useState([]);\n  const [ownerId, setOwnerId] = useState(\"\");\n  const [ownerEmail, setOwnerEmail] = useState(\"\");\n  const [currentUserId, setCurrentUserId] = useState(\"\");\n  const [newItem, setNewItem] = useState(\"\");\n  const [notification, setNotification] = useState(\"\");\n  const isMounted = useRef(false);\n  const getAuthHeaders = () => ({\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n    }\n  });\n  useEffect(() => {\n    var _location$state;\n    if (isMounted.current) return;\n    isMounted.current = true;\n    if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.notification) {\n      setNotification(location.state.notification);\n      const timer = setTimeout(() => setNotification(\"\"), 3000);\n      return () => clearTimeout(timer);\n    }\n    const userId = localStorage.getItem(\"userId\");\n    if (!userId) {\n      console.error(\"No userId in localStorage\");\n      navigate(\"/login\");\n      return;\n    }\n    socket.connect();\n    console.log(\"Socket connecting for list:\", listId, \"user:\", userId);\n    socket.emit(\"joinList\", listId);\n    socket.emit(\"joinUser\", userId);\n    axios.get(`${API_URL}/lists/${listId}`, getAuthHeaders()).then(res => {\n      console.log(\"List data:\", res.data);\n      setItems(res.data.items || []);\n      setMembers(res.data.members.sort((a, b) => a.joinedAt - b.joinedAt));\n      setOwnerId(res.data.owner);\n      setOwnerEmail(res.data.ownerEmail || \"Неизвестно\");\n      setListName(res.data.name);\n      setCurrentUserId(res.data.currentUserId);\n    }).catch(err => {\n      var _err$response, _err$response2, _err$response3;\n      console.error(\"Error fetching list:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err);\n      if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 404) {\n        navigate(\"/dashboard\", {\n          state: {\n            notification: \"Список не найден или вы были удалены\"\n          }\n        });\n      } else if (((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status) === 403) {\n        navigate(\"/dashboard\", {\n          state: {\n            notification: \"Вы не участник этого списка\"\n          }\n        });\n      } else {\n        navigate(\"/dashboard\");\n      }\n    });\n    socket.on(\"listUpdated\", ({\n      items,\n      members,\n      name\n    }) => {\n      console.log(\"Received listUpdated:\", {\n        items,\n        members,\n        name\n      });\n      setItems(items || []);\n      setMembers(members ? members.sort((a, b) => a.joinedAt - b.joinedAt) : []);\n      if (name) setListName(name);\n    });\n    socket.on(\"kickedFromList\", ({\n      listId: kickedListId,\n      name\n    }) => {\n      console.log(\"Received kickedFromList:\", {\n        kickedListId,\n        name\n      }, \"Current listId:\", listId);\n      if (kickedListId === listId) {\n        navigate(\"/dashboard\", {\n          state: {\n            notification: `Владелец списка удалил вас из \"${name}\"`\n          }\n        });\n      }\n    });\n    return () => {\n      console.log(\"Cleaning up socket listeners for list:\", listId);\n      socket.off(\"listUpdated\");\n      socket.off(\"kickedFromList\");\n      socket.disconnect();\n      isMounted.current = false;\n    };\n  }, [listId, navigate, location.state]);\n  const addItem = async () => {\n    if (!newItem) return;\n    try {\n      console.log(\"Adding item:\", newItem, \"to list:\", listId); // Лог для отладки\n      const res = await axios.post(`${API_URL}/lists/items/${listId}`,\n      // Исправляем URL\n      {\n        name: newItem\n      }, getAuthHeaders());\n      console.log(\"Added items:\", res.data.items);\n      setItems(res.data.items);\n      socket.emit(\"updateList\", {\n        listId,\n        items: res.data.items\n      });\n      setNewItem(\"\");\n    } catch (err) {\n      var _err$response4, _err$response5, _err$response6, _err$response6$data;\n      console.error(\"Error adding item:\", ((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.data) || err);\n      const errorMessage = ((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : _err$response5.status) === 404 ? \"Список не найден\" : ((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.error) || \"Ошибка при добавлении товара\";\n      setNotification(errorMessage);\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n  const toggleItemCompletion = async (itemId, completed) => {\n    try {\n      console.log(\"Toggling item:\", itemId, \"to completed:\", completed); // Лог для отладки\n      const res = await axios.put(`${API_URL}/lists/items/${itemId}/complete`,\n      // Исправляем URL\n      {\n        completed\n      }, getAuthHeaders());\n      console.log(\"Updated items:\", res.data.items);\n      setItems(res.data.items);\n      socket.emit(\"updateList\", {\n        listId,\n        items: res.data.items\n      });\n    } catch (err) {\n      var _err$response7, _err$response8, _err$response9, _err$response9$data;\n      console.error(\"Error toggling item completion:\", ((_err$response7 = err.response) === null || _err$response7 === void 0 ? void 0 : _err$response7.data) || err);\n      const errorMessage = ((_err$response8 = err.response) === null || _err$response8 === void 0 ? void 0 : _err$response8.status) === 404 ? \"Элемент или список не найден\" : ((_err$response9 = err.response) === null || _err$response9 === void 0 ? void 0 : (_err$response9$data = _err$response9.data) === null || _err$response9$data === void 0 ? void 0 : _err$response9$data.error) || \"Ошибка при обновлении статуса товара\";\n      setNotification(errorMessage);\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n  const deleteCompletedItems = async () => {\n    try {\n      console.log(\"Deleting completed items from list:\", listId); // Лог для отладки\n      const res = await axios.delete(`${API_URL}/lists/${listId}/items/completed`, {\n        headers: getAuthHeaders().headers\n      } // Убедимся, что заголовки отправляются корректно\n      );\n      console.log(\"Updated items after deletion:\", res.data.items);\n      setItems(res.data.items);\n      socket.emit(\"updateList\", {\n        listId,\n        items: res.data.items\n      });\n    } catch (err) {\n      var _err$response0, _err$response1, _err$response10, _err$response10$data;\n      console.error(\"Error deleting completed items:\", ((_err$response0 = err.response) === null || _err$response0 === void 0 ? void 0 : _err$response0.data) || err);\n      const errorMessage = ((_err$response1 = err.response) === null || _err$response1 === void 0 ? void 0 : _err$response1.status) === 404 ? \"Список не найден\" : ((_err$response10 = err.response) === null || _err$response10 === void 0 ? void 0 : (_err$response10$data = _err$response10.data) === null || _err$response10$data === void 0 ? void 0 : _err$response10$data.error) || \"Ошибка при удалении отмеченных товаров\";\n      setNotification(errorMessage);\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n  const removeMember = async userId => {\n    try {\n      await axios.delete(`${API_URL}/lists/${listId}/members/${userId}`, getAuthHeaders());\n      const res = await axios.get(`${API_URL}/lists/${listId}`, getAuthHeaders());\n      setMembers(res.data.members.sort((a, b) => a.joinedAt - b.joinedAt));\n    } catch (err) {\n      var _err$response11, _err$response11$data;\n      console.error(\"Error removing member:\", err);\n      setNotification(((_err$response11 = err.response) === null || _err$response11 === void 0 ? void 0 : (_err$response11$data = _err$response11.data) === null || _err$response11$data === void 0 ? void 0 : _err$response11$data.error) || \"Ошибка при удалении участника\");\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n  const deleteList = async () => {\n    try {\n      await axios.delete(`${API_URL}/lists/${listId}`, getAuthHeaders());\n      navigate(\"/dashboard\", {\n        state: {\n          notification: \"Список удалён\"\n        }\n      });\n    } catch (err) {\n      var _err$response12, _err$response12$data;\n      console.error(\"Error deleting list:\", err);\n      setNotification(((_err$response12 = err.response) === null || _err$response12 === void 0 ? void 0 : (_err$response12$data = _err$response12.data) === null || _err$response12$data === void 0 ? void 0 : _err$response12$data.error) || \"Ошибка при удалении списка\");\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n  const leaveList = async () => {\n    if (ownerId === currentUserId) {\n      setNotification(\"Владелец не может покинуть свой список. Удалите список, если хотите выйти.\");\n      setTimeout(() => setNotification(\"\"), 3000);\n      return;\n    }\n    try {\n      await axios.post(`${API_URL}/lists/${listId}/leave`, {}, getAuthHeaders());\n      navigate(\"/dashboard\", {\n        state: {\n          notification: `Вы покинули список \"${listName}\"`\n        }\n      });\n    } catch (err) {\n      var _err$response13, _err$response14, _err$response14$data;\n      console.error(\"Error leaving list:\", ((_err$response13 = err.response) === null || _err$response13 === void 0 ? void 0 : _err$response13.data) || err);\n      setNotification(((_err$response14 = err.response) === null || _err$response14 === void 0 ? void 0 : (_err$response14$data = _err$response14.data) === null || _err$response14$data === void 0 ? void 0 : _err$response14$data.error) || \"Ошибка при выходе из списка\");\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n  const updateListName = async () => {\n    try {\n      await axios.put(`${API_URL}/lists/${listId}`, {\n        name: listName\n      }, getAuthHeaders());\n    } catch (err) {\n      var _err$response15, _err$response15$data;\n      console.error(\"Error updating list name:\", err);\n      setNotification(((_err$response15 = err.response) === null || _err$response15 === void 0 ? void 0 : (_err$response15$data = _err$response15.data) === null || _err$response15$data === void 0 ? void 0 : _err$response15$data.error) || \"Ошибка при обновлении названия\");\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n  const copyShareLink = () => {\n    const shareLink = `${window.location.origin}/join?listId=${listId}`;\n    navigator.clipboard.writeText(shareLink);\n    setNotification(\"Ссылка скопирована!\");\n    setTimeout(() => setNotification(\"\"), 3000);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-secondary\",\n        onClick: () => navigate(\"/dashboard\"),\n        children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-danger\",\n        onClick: leaveList,\n        children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), notification && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification\",\n      children: notification\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: listName,\n        onChange: e => setListName(e.target.value),\n        onBlur: updateListName,\n        disabled: ownerId !== currentUserId,\n        className: \"list-title-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u0412\\u043B\\u0430\\u0434\\u0435\\u043B\\u0435\\u0446: \", ownerEmail]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this), ownerId === currentUserId && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button-danger\",\n      onClick: deleteList,\n      children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0441\\u043F\\u0438\\u0441\\u043E\\u043A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0422\\u043E\\u0432\\u0430\\u0440\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newItem,\n        onChange: e => setNewItem(e.target.value),\n        placeholder: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-primary\",\n        onClick: addItem,\n        children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-danger\",\n        onClick: deleteCompletedItems,\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043E\\u0442\\u043C\\u0435\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"item-list\",\n        children: items.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: item.completed ? \"completed\" : \"\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: item.completed,\n            onChange: e => toggleItemCompletion(item._id, e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this), item.name]\n        }, item._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0423\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"member-list\",\n        children: members.map(member => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [member.email, ownerId === currentUserId && member.userId !== ownerId && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button-danger\",\n            onClick: () => removeMember(member.userId),\n            children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 17\n          }, this)]\n        }, member.userId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-primary\",\n        onClick: copyShareLink,\n        children: \"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 5\n  }, this);\n}\n_s(ShoppingList, \"mqt/44HD98rlGhYe4JK92YEEfVg=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = ShoppingList;\nexport default ShoppingList;\nvar _c;\n$RefreshReg$(_c, \"ShoppingList\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","useParams","useNavigate","useLocation","io","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","socket","autoConnect","ShoppingList","_s","listId","navigate","location","listName","setListName","items","setItems","members","setMembers","ownerId","setOwnerId","ownerEmail","setOwnerEmail","currentUserId","setCurrentUserId","newItem","setNewItem","notification","setNotification","isMounted","getAuthHeaders","headers","Authorization","localStorage","getItem","_location$state","current","state","timer","setTimeout","clearTimeout","userId","console","error","connect","log","emit","get","then","res","data","sort","a","b","joinedAt","owner","name","catch","err","_err$response","_err$response2","_err$response3","response","status","on","kickedListId","off","disconnect","addItem","post","_err$response4","_err$response5","_err$response6","_err$response6$data","errorMessage","toggleItemCompletion","itemId","completed","put","_err$response7","_err$response8","_err$response9","_err$response9$data","deleteCompletedItems","delete","_err$response0","_err$response1","_err$response10","_err$response10$data","removeMember","_err$response11","_err$response11$data","deleteList","_err$response12","_err$response12$data","leaveList","_err$response13","_err$response14","_err$response14$data","updateListName","_err$response15","_err$response15$data","copyShareLink","shareLink","window","origin","navigator","clipboard","writeText","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","onBlur","disabled","placeholder","map","item","checked","_id","member","email","_c","$RefreshReg$"],"sources":["/Users/rahatmustafin/Documents/Projects/ShopSmart/client/src/components/ShoppingList.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\nimport io from \"socket.io-client\";\n\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5001\";\nconst socket = io(API_URL, { autoConnect: false });\n\nfunction ShoppingList() {\n  const { listId } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [listName, setListName] = useState(\"Новый список\");\n  const [items, setItems] = useState([]);\n  const [members, setMembers] = useState([]);\n  const [ownerId, setOwnerId] = useState(\"\");\n  const [ownerEmail, setOwnerEmail] = useState(\"\");\n  const [currentUserId, setCurrentUserId] = useState(\"\");\n  const [newItem, setNewItem] = useState(\"\");\n  const [notification, setNotification] = useState(\"\");\n  const isMounted = useRef(false);\n\n  const getAuthHeaders = () => ({\n    headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\n  });\n\n  useEffect(() => {\n    if (isMounted.current) return;\n    isMounted.current = true;\n\n    if (location.state?.notification) {\n      setNotification(location.state.notification);\n      const timer = setTimeout(() => setNotification(\"\"), 3000);\n      return () => clearTimeout(timer);\n    }\n\n    const userId = localStorage.getItem(\"userId\");\n    if (!userId) {\n      console.error(\"No userId in localStorage\");\n      navigate(\"/login\");\n      return;\n    }\n\n    socket.connect();\n    console.log(\"Socket connecting for list:\", listId, \"user:\", userId);\n    socket.emit(\"joinList\", listId);\n    socket.emit(\"joinUser\", userId);\n\n    axios\n      .get(`${API_URL}/lists/${listId}`, getAuthHeaders())\n      .then((res) => {\n        console.log(\"List data:\", res.data);\n        setItems(res.data.items || []);\n        setMembers(res.data.members.sort((a, b) => a.joinedAt - b.joinedAt));\n        setOwnerId(res.data.owner);\n        setOwnerEmail(res.data.ownerEmail || \"Неизвестно\");\n        setListName(res.data.name);\n        setCurrentUserId(res.data.currentUserId);\n      })\n      .catch((err) => {\n        console.error(\"Error fetching list:\", err.response?.data || err);\n        if (err.response?.status === 404) {\n          navigate(\"/dashboard\", { state: { notification: \"Список не найден или вы были удалены\" } });\n        } else if (err.response?.status === 403) {\n          navigate(\"/dashboard\", { state: { notification: \"Вы не участник этого списка\" } });\n        } else {\n          navigate(\"/dashboard\");\n        }\n      });\n\n    socket.on(\"listUpdated\", ({ items, members, name }) => {\n      console.log(\"Received listUpdated:\", { items, members, name });\n      setItems(items || []);\n      setMembers(members ? members.sort((a, b) => a.joinedAt - b.joinedAt) : []);\n      if (name) setListName(name);\n    });\n\n    socket.on(\"kickedFromList\", ({ listId: kickedListId, name }) => {\n      console.log(\"Received kickedFromList:\", { kickedListId, name }, \"Current listId:\", listId);\n      if (kickedListId === listId) {\n        navigate(\"/dashboard\", { state: { notification: `Владелец списка удалил вас из \"${name}\"` } });\n      }\n    });\n\n    return () => {\n      console.log(\"Cleaning up socket listeners for list:\", listId);\n      socket.off(\"listUpdated\");\n      socket.off(\"kickedFromList\");\n      socket.disconnect();\n      isMounted.current = false;\n    };\n  }, [listId, navigate, location.state]);\n\n  const addItem = async () => {\n    if (!newItem) return;\n    try {\n      console.log(\"Adding item:\", newItem, \"to list:\", listId); // Лог для отладки\n      const res = await axios.post(\n        `${API_URL}/lists/items/${listId}`, // Исправляем URL\n        { name: newItem },\n        getAuthHeaders()\n      );\n      console.log(\"Added items:\", res.data.items);\n      setItems(res.data.items);\n      socket.emit(\"updateList\", { listId, items: res.data.items });\n      setNewItem(\"\");\n    } catch (err) {\n      console.error(\"Error adding item:\", err.response?.data || err);\n      const errorMessage =\n        err.response?.status === 404\n          ? \"Список не найден\"\n          : err.response?.data?.error || \"Ошибка при добавлении товара\";\n      setNotification(errorMessage);\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  const toggleItemCompletion = async (itemId, completed) => {\n    try {\n      console.log(\"Toggling item:\", itemId, \"to completed:\", completed); // Лог для отладки\n      const res = await axios.put(\n        `${API_URL}/lists/items/${itemId}/complete`, // Исправляем URL\n        { completed },\n        getAuthHeaders()\n      );\n      console.log(\"Updated items:\", res.data.items);\n      setItems(res.data.items);\n      socket.emit(\"updateList\", { listId, items: res.data.items });\n    } catch (err) {\n      console.error(\"Error toggling item completion:\", err.response?.data || err);\n      const errorMessage =\n        err.response?.status === 404\n          ? \"Элемент или список не найден\"\n          : err.response?.data?.error || \"Ошибка при обновлении статуса товара\";\n      setNotification(errorMessage);\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  const deleteCompletedItems = async () => {\n    try {\n      console.log(\"Deleting completed items from list:\", listId); // Лог для отладки\n      const res = await axios.delete(\n        `${API_URL}/lists/${listId}/items/completed`,\n        { headers: getAuthHeaders().headers } // Убедимся, что заголовки отправляются корректно\n      );\n      console.log(\"Updated items after deletion:\", res.data.items);\n      setItems(res.data.items);\n      socket.emit(\"updateList\", { listId, items: res.data.items });\n    } catch (err) {\n      console.error(\"Error deleting completed items:\", err.response?.data || err);\n      const errorMessage =\n        err.response?.status === 404\n          ? \"Список не найден\"\n          : err.response?.data?.error || \"Ошибка при удалении отмеченных товаров\";\n      setNotification(errorMessage);\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  const removeMember = async (userId) => {\n    try {\n      await axios.delete(`${API_URL}/lists/${listId}/members/${userId}`, getAuthHeaders());\n      const res = await axios.get(`${API_URL}/lists/${listId}`, getAuthHeaders());\n      setMembers(res.data.members.sort((a, b) => a.joinedAt - b.joinedAt));\n    } catch (err) {\n      console.error(\"Error removing member:\", err);\n      setNotification(err.response?.data?.error || \"Ошибка при удалении участника\");\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  const deleteList = async () => {\n    try {\n      await axios.delete(`${API_URL}/lists/${listId}`, getAuthHeaders());\n      navigate(\"/dashboard\", { state: { notification: \"Список удалён\" } });\n    } catch (err) {\n      console.error(\"Error deleting list:\", err);\n      setNotification(err.response?.data?.error || \"Ошибка при удалении списка\");\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  const leaveList = async () => {\n    if (ownerId === currentUserId) {\n      setNotification(\"Владелец не может покинуть свой список. Удалите список, если хотите выйти.\");\n      setTimeout(() => setNotification(\"\"), 3000);\n      return;\n    }\n    try {\n      await axios.post(`${API_URL}/lists/${listId}/leave`, {}, getAuthHeaders());\n      navigate(\"/dashboard\", { state: { notification: `Вы покинули список \"${listName}\"` } });\n    } catch (err) {\n      console.error(\"Error leaving list:\", err.response?.data || err);\n      setNotification(err.response?.data?.error || \"Ошибка при выходе из списка\");\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  const updateListName = async () => {\n    try {\n      await axios.put(`${API_URL}/lists/${listId}`, { name: listName }, getAuthHeaders());\n    } catch (err) {\n      console.error(\"Error updating list name:\", err);\n      setNotification(err.response?.data?.error || \"Ошибка при обновлении названия\");\n      setTimeout(() => setNotification(\"\"), 3000);\n    }\n  };\n\n  const copyShareLink = () => {\n    const shareLink = `${window.location.origin}/join?listId=${listId}`;\n    navigator.clipboard.writeText(shareLink);\n    setNotification(\"Ссылка скопирована!\");\n    setTimeout(() => setNotification(\"\"), 3000);\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"list-header\">\n        <button className=\"button-secondary\" onClick={() => navigate(\"/dashboard\")}>\n          Назад\n        </button>\n        <button className=\"button-danger\" onClick={leaveList}>\n          Выйти\n        </button>\n      </div>\n      {notification && <div className=\"notification\">{notification}</div>}\n      <h1>\n        <input\n          type=\"text\"\n          value={listName}\n          onChange={(e) => setListName(e.target.value)}\n          onBlur={updateListName}\n          disabled={ownerId !== currentUserId}\n          className=\"list-title-input\"\n        />\n      </h1>\n      <p>Владелец: {ownerEmail}</p>\n      {ownerId === currentUserId && (\n        <button className=\"button-danger\" onClick={deleteList}>\n          Удалить список\n        </button>\n      )}\n      <div className=\"list-section\">\n        <h2>Товары</h2>\n        <input\n          type=\"text\"\n          value={newItem}\n          onChange={(e) => setNewItem(e.target.value)}\n          placeholder=\"Добавить товар\"\n        />\n        <button className=\"button-primary\" onClick={addItem}>\n          Добавить\n        </button>\n        <button className=\"button-danger\" onClick={deleteCompletedItems}>\n          Удалить отмеченные\n        </button>\n        <ul className=\"item-list\">\n          {items.map((item) => (\n            <li key={item._id} className={item.completed ? \"completed\" : \"\"}>\n              <input\n                type=\"checkbox\"\n                checked={item.completed}\n                onChange={(e) => toggleItemCompletion(item._id, e.target.checked)}\n              />\n              {item.name}\n            </li>\n          ))}\n        </ul>\n      </div>\n      <div className=\"list-section\">\n        <h2>Участники</h2>\n        <ul className=\"member-list\">\n          {members.map((member) => (\n            <li key={member.userId}>\n              {member.email}\n              {ownerId === currentUserId && member.userId !== ownerId && (\n                <button\n                  className=\"button-danger\"\n                  onClick={() => removeMember(member.userId)}\n                >\n                  Удалить\n                </button>\n              )}\n            </li>\n          ))}\n        </ul>\n        <button className=\"button-primary\" onClick={copyShareLink}>\n          Поделиться\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default ShoppingList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}